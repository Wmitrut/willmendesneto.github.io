<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>AngularJS: About E2E tests and Protractor - pt 2</title>
  <meta name="description" content="This is my blog, where i talk about technologies" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="canonical" href="http://willmendesneto.github.io/2015/02/15/angularjs-about-e2e-tests-and-protractor-pt-2">

  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="cache-control" content="no-store, no-cache, must-revalidate" />
    <meta http-equiv="Pragma" content="no-store, no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
    <meta http-equiv="PRAGMA" content="NO-CACHE" />
    <meta name="domain" content="willmendesneto.github.io" />
    <meta name="url" content="/2015/02/15/angularjs-about-e2e-tests-and-protractor-pt-2" />

    <meta property="og:type" content="article" />
    <meta property="og:title" content="AngularJS: About E2E tests and Protractor - pt 2" />
    <meta property="og:url" content="/2015/02/15/angularjs-about-e2e-tests-and-protractor-pt-2" />
    <meta property="og:description" content="" />
    <meta property="article:author" content="" />
    <meta property="og:site_name" content="Wilson Mendes - Blog" />
    <meta property="og:image" content="https://d2eip9sf3oo6c2.cloudfront.net/series/covers/000/000/002/full/angularjs_functional_testing_protractor.jpg?1390674819" />
    <meta name="twitter:site" content="@willmendesneto" />
    <meta name="twitter:image" content="https://d2eip9sf3oo6c2.cloudfront.net/series/covers/000/000/002/full/angularjs_functional_testing_protractor.jpg?1390674819" />
    <meta name="twitter:card" content="summary" />
    <meta name="autor" content="Wilson Mendes" />
    <meta name="reply-to" content="willmendesneto@gmail.com">
    <meta name="revisit-after" content="3" />
    <meta name="title" content="Wilson Mendes - Blog">
    <meta name="description" content="This is my blog, where i talk about technologies">
    <meta name="keywords" content="["angularjs",, "frontend",, "protractor",, "end-to-end",, "tests"]" />
  

  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Pesquisa no Blog" />

  <link rel="shortcut icon" href="/assets/images/favicon.ico">
<!--  <link rel="stylesheet" href=""> -->
  <!-- <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i"> -->
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,700,800" rel="stylesheet" type="text/css">

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/main.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/mini-preview.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/solarized-dark.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/assets/css/print.css" />
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<!-- <a href="http://willmendesneto.github.io" class="logo-readium"><span class="logo" style="background-image: url()"></span></a> -->

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="article-image">
          <div class="post-image-image" style="background-image: url(https://d2eip9sf3oo6c2.cloudfront.net/series/covers/000/000/002/full/angularjs_functional_testing_protractor.jpg?1390674819)">
            Article Image
          </div>
          <div class="post-meta">
            <h1 class="post-title">AngularJS: About E2E tests and Protractor - pt 2</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(https://pt.gravatar.com/userimage/20307137/677413a79461cdfd62c8a65143214850.png?size=300)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Wilson Mendes</h4>
              on
              <time datetime="2015-02-15 00:00">15 Feb 2015</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
            <div style="text-align:center">
              <a href="#topofpage" class="topofpage"><i class="fa fa-angle-down"></i></a>
            </div>
          </div>
        </div>
        
        <section class="post-content">

          <a class="home-button"  href="/">&laquo; Home</a>
          <div class="post-reading">
            Lido a <span class="post-reading-time"></span>
          </div>
          <a name="topofpage"></a>
          <div id="post-content-page">
            <h2 id="introduction">INTRODUCTION</h2>

<p>This time we will know more about it with an overview in some aspects for Protractor usage in projects and best practices such as page objects, performance, cache, usage with nodejs and others.</p>

<blockquote>
  <p>Because best practices always are welcome!</p>
</blockquote>

<h2 id="why-page-objects">Why Page Objects</h2>

<p>Page Object is a object model with properties and methods, wrapping page elements and interactions event (click, submit, etc). Your objective is simplify the test scripts and upgrade your code reuse in end-to-end tests, reducing amount of duplicate code and centralyzing UI modifications and fixes in only one file.</p>

<p>Let’s think in a scenario that you have to test one of your directives in diferent scenarios, working with others controllers, services and templates. If you have to write <code>element(by...)</code> many times, the manutenability of your tests will not be so cool and ever that you have to take a look in them, your sensation will be something like this…</p>

<p><img src="/assets/images/ugly.gif" alt="urgh!" title="urgh!" /></p>

<h2 id="using-page-objects">Using Page Objects</h2>

<blockquote>
  <p>A example of Page object construction</p>
</blockquote>

<pre><code class="language-javascript">var PageObject = function() {
    // properties
    this.property = element(by.id('property'))
    ...
}

module.exports = new PageObject();
</code></pre>

<p>You should use Page Objects in your application tests. It’s a best practice for manutenibility and sanity for your tests.</p>

<p>Page Objects are useds for centralize the properties and methods of the website/system/app page. For example, if you have a form in your app, in this objects the properties will be form elements (inputs, selects, textboxes) and methods are the events of your form elements (click in button, blur in input element, change in select, etc).</p>

<p>A simple example using Page Objects in your protractor tests.</p>

<pre><code class="language-javascript">
describe('angularjs homepage todo list', function() {
  var pageObject = require('page.js');

  beforeEach(function() {
    // before function
    browser.get('&lt;your-url&gt;');
    ...
  });

  afterEach(function() {
    //after function
    ...
  });

  it('Page Object should be "Angular Testing Recipes" in your text content by default', function() {
    expect(pageObject.property.getText()).toEqual('Angular Testing Recipes');
  });
});
</code></pre>

<h2 id="working-with-promises">Working with promises</h2>

<p>All page events returns for you test like as promise. In this case, your have to resolve the promises get your result and finish your test correctly. For example</p>

<pre><code class="language-javascript">PageObject.property.click();
// your assertions are here
</code></pre>

<p>can be used this way too</p>

<pre><code class="language-javascript">PageObject.property.click().then(function(){
   // your assertions are here
   ...
});
</code></pre>

<p>You can use <code>waitForAngular()</code> method for that Protractor waits for AngularJS event finalization.</p>

<pre><code class="language-javascript">browser.waitForAngular();
</code></pre>

<p><code>expect()</code> method resolve the promises in your tests. For example:</p>

<pre><code class="language-javascript">expect(PageObject.property.getText()).toEqual('your test');
</code></pre>

<h2 id="performance-in-your-end-to-end-tests">Performance in your End to End Tests</h2>

<p>Test your application with animation disabled. In many times has no sense to test your app with animations enabled and with this resource disabled the tests run more fast.</p>

<pre><code class="language-javascript">allowAnimations(false);
</code></pre>

<p>To disable angular debug informations is a best practice too, because you should use protractor debug for it.</p>

<pre><code class="language-javascript">$compileProvider.debugInfoEnabled(false);
</code></pre>

<h2 id="using-nodejs-in-protractor-tests">Using NodeJS in Protractor tests</h2>

<p>In some cases you can the option of use NodeJS with protractor methods for more elaborated tests. In this example we are testing a ordenation click event in a tablesorter component, but using NodeJS for set table headers in our tests and caching table headers elements (get all elements that <code>by.css()</code> method return, resolving your promise and managing tests based in <code>items</code> values).</p>

<pre><code class="language-javascript">// spec.js
describe('TableSorter: testing component', function () {

  var tableSorter;

  it('changes active table order based in user\'s choice', function () {

    browser.get('/');

    element.all(by.css('.table-sorter-order')).then(function(items) {

      expect(items.length).toBe(1);

      //  Testing all elements with ordenation method
      ['Name', 'Email'].forEach(function(text, key){

        describe('Testing Item "'+text+'"', function(){
          //  Order Asc
          it('ASC ordenation', function () {
            expect(items[key].getText()).toBe(text);
            items[key].click();
            tableSorter = element(by.css('.table-sorter-order.asc'));
            expect(tableSorter.getText()).toEqual(text);
          });
          //  Order Desc
          it('DESC ordenation', function () {
            items[key].click();
            tableSorter = element(by.css('.table-sorter-order.desc'));
            expect(tableSorter.getText()).toEqual(text);
          });
        });
      });
    });
  });

});
</code></pre>

<h2 id="conclusion">CONCLUSION</h2>

<p>Protractor is a awesome tool for create and integrate end-to-end test in your applications, but remember that end-to-end is used with unit tests (more unit tests, less end-to-end tests).</p>

<p>Thanks and we see very soon!</p>


          </div>
        </section>

        
          <section class="newsletter-content">
    <form action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=willmendesneto', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true;" >
        <h3 class="newsletter-title">Receive news by email</h3>
        <p class="newsletter-text">Subscribe to my newsletter to receive notifications of new articles in your e- mail</p>
        <input class="input-newsletter" type="email" name="email" placeholder="email"/>
        <input type="hidden" value="willmendesneto" name="uri"/>
        <input type="hidden" name="loc" value="en_US"/>
        <input class="btn btn-newsletter" type="submit" value="Subscribe" />
    </form>
</section>

        

        <footer class="post-footer">

          <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
  <a class="addthis_button_preferred_1"></a>
  <a class="addthis_button_preferred_2"></a>
  <a class="addthis_button_preferred_3"></a>
  <a class="addthis_button_preferred_4"></a>
  <a class="addthis_button_preferred_5"></a>
</div>


          <!-- <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=AngularJS%3A+About+E2E+tests+and+Protractor+-+pt+2&amp;url=http://willmendesneto.github.io/2015/02/15/angularjs-about-e2e-tests-and-protractor-pt-2"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
                <a class="icon-facebook" href="//www.facebook.com/sharer.php?t=AngularJS%3A+About+E2E+tests+and+Protractor+-+pt+2&amp;u=http://willmendesneto.github.io/2015/02/15/angularjs-about-e2e-tests-and-protractor-pt-2"
                  onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
                <i class="fa fa-facebook"></i><span class="hidden">facebook</span>
                </a>
              
            
              
            
              
                <a class="icon-google-plus" href="https://plus.google.com/share?t=AngularJS%3A+About+E2E+tests+and+Protractor+-+pt+2&amp;url=http://willmendesneto.github.io/2015/02/15/angularjs-about-e2e-tests-and-protractor-pt-2"
                  onclick="window.open(this.href, 'google-plus-share', 'width=550,height=255');return false;">
                <i class="fa fa-google-plus"></i><span class="hidden">google-plus</span>
                </a>
              
            
          </section> -->
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <section class="author">
              <div class="author-image" style="background-image: url(https://pt.gravatar.com/userimage/20307137/677413a79461cdfd62c8a65143214850.png?size=300)">Blog Logo</div>
              <h4>Wilson Mendes</h4>
              
                <p class="bio">Google Developer Expert (GDE) AngularJS and GDG Salvador Organizer. Musician and designer in his spare time.</p>
              
              <hr>
              <p class="published">Publicado em <time datetime="2015-02-15 00:00">15 Feb 2015</time></p>
            </section>
            <footer class="site-footer">
              <section class="poweredby">Mais um blog feito com <a href="http://jekyllrb.com">Jekyll</a></section>
              <a class="subscribe" href="/feed.xml" target="_blank"> <span class="tooltip"> <i class="fa fa-rss"></i> Assine o feed.</span></a>
            </footer>
          </div>
          
        </div>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'willmendesnetogithubio'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */

        'use strict';

        function load() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

          // Remove o evento
          window.onscroll = function() {};
        }

        window.onscroll = function() {
          if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 2000)) {
            load();
          }
        };
        </script>

        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </article>

    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/background-1.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Wilson Mendes - Blog</h1>
        <h2 class="blog-description">This is my blog, where i talk about technologies</h2>
        <a href="/" class="btn">Back to Home</a>
      </div>
    </div>

    
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53c591e4471ce379" async="async"></script>

<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/mini-preview.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-58169656-1', 'auto');
ga('send', 'pageview');

(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    $window.on('scroll', function() {
      var top = $window.scrollTop();

      if (top < 0 || top > 1500) { return; }
      $image
        .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
        .css('opacity', 1-Math.max(top/700, 0));
    });
    $window.trigger('scroll');

    var height = $('.article-image').height();
    $('.post-content').css('padding-top', height + 'px');

    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
       && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({ scrollTop: target.offset().top }, 500);
          return false;
        }
      }
    });
  });
}(jQuery));
</script>

  </body>
</html>
