---
layout: post
title: 'Tablesorter: configurações e mapeamentos via classes css'
categories:
- Javascript
- Jquery
- Linguagens de Programação
tags:
- classes
- configuração
- css
- javascript
- jquery
- open-source
- tablesorter
status: publish
type: post
published: true
meta:
  _publicize_pending: '1'
  tagazine-media: a:7:{s:7:"primary";s:0:"";s:6:"images";a:0:{}s:6:"videos";a:0:{}s:11:"image_count";i:0;s:6:"author";s:8:"20307137";s:7:"blog_id";s:8:"34783303";s:9:"mod_stamp";s:19:"2013-01-23
    16:52:16";}
  _wp_old_slug: '75'
  _oembed_8f34de6d8eb0eb8a3d655f5e7b9e0273: '{{unknown}}'
  _oembed_352607e57156c9f5c8b0d6e2b570891d: '{{unknown}}'
author: 
---
<div>Olá pessoal</div>
<div></div>
<div>Ao utilizar o plugin <a title="tablesorter" href="http://tablesorter.com/docs/" target="_blank">tablesorter</a>, tive alguns problemas com ordenação de valores, datas e outros atributos. Acabei pesquisando e vi que <a href="http://stackoverflow.com/search?q=tablesorter+date" target="_blank">não era o único</a>.</div>
<div></div>
<div>Vi algumas soluções baseadas no plugin <a href="https://github.com/jquery/jquery-metadata" target="_blank">Jquery metadata</a>, mas estava querendo evitar este overhead, já que posso trabalhar com configurações de classes a partir do próprio jquery.</div>
<div></div>
<div>Baseado em uma solução proposta no próprio stackoverflow (<a href="http://stackoverflow.com/questions/5672993/how-to-ignore-th-with-specific-class-name-in-tablesorter" target="_blank">http://stackoverflow.com/questions/5672993/how-to-ignore-th-with-specific-class-name-in-tablesorter</a>), acabei criando uma própria com os seletores.</div>
<div></div>
<div>Baixe o arquivo tablesorter no site do projeto</div>
<div></div>
<div>Abra o arquivo jquery.tablesorter.js e modifique:</div>
<div></div>
<div>- A variável "defaults" vai ficar com mais um atributo abaixo da chave <em>debug : false</em></div>
<div></div>
<div><code>    debug: false,<br />
noSorterClass: 'no-sorter'</code></div>
<div>- O método "checkHeaderMetadata" agora irá utilizar o valor da classe configurada para não inserir a coluna como "sortable"</div>
<div></div>
<div><code>function checkHeaderMetadata(cell, noSorterClass) {<br />
if ((($.metadata) &amp;&amp; ($(cell).metadata().sorter === false)) || $(cell).hasClass(noSorterClass)) {<br />
return true;<br />
};<br />
return false;<br />
}</code></div>
<div></div>
<div>E agora iremo modificar o método que utiliza o checkHeaderMetadata para que envie o valor da classe configurada. O método que o utiliza é o buildHeaders:</div>
<div></div>
<div>modifique o conteúdo</div>
<div><code>if (checkHeaderMetadata(this) || checkHeaderOptions(table, index)) this.sortDisabled = true;</code></div>
<div></div>
<div>por este</div>
<div><code><br />
if (checkHeaderMetadata(this, table.config.noSorterClass) || checkHeaderOptions(table, index))    this.sortDisabled = true;<br />
</code></div>
<div></div>
<div>Agora em um arquivo javascript insira as configurações do tablesorter. Utilizei as configurações padrão do próprio plugin Tablesorter, então só vamos inserir o seguinte código:</div>
<div></div>
<div><code><br />
$(function() {<br />
function setupTablesorter() {</code></div>
<div></div>
<div></div>
<div><code><br />
$.tablesorter.addParser({<br />
id: "money",<br />
is: function(s) {<br />
return true;<br />
},<br />
format: function(s) {<br />
return $.tablesorter.formatFloat(s.replace(/ /, '').replace('R$', '').replace(/\./, '').replace(/\,/, '.').replace(new RegExp(/[^0-9,]/g),""));<br />
},<br />
type: "numeric"<br />
});<br />
</code><br />
<code><br />
var classHeaders = {<br />
'text': '.sorter-text',<br />
'digit': '.sorter-digit',<br />
'currency': '.sorter-currency',<br />
'ipAddress': '.sorter-ipAddress',<br />
'url': '.sorter-url',<br />
'isoDate': '.sorter-isoDate',<br />
'usLongDate': '.sorter-usLongDate',<br />
'shortDate': '.sorter-shortDate',<br />
'time': '.sorter-time',<br />
'metadata': '.sorter-metadata',<br />
'digit': '.sorter-digit',<br />
'money': '.sorter-money',<br />
};</code></div>
<div></div>
<div><code><code><code>        var tableHeaders = '', separator;</code></code></code></div>
<div><code><code><code>        $('.tablesorter').each(function (i, e) {<em id="__mceDel"> </em></code></code></code></div>
<div><code><code><code><em id="__mceDel">            var self = $(this);<br />
$.each(classHeaders, function(key, value){<br />
self.find(key).each(function (pos) {</em></code></code></code></div>
<div><code><code><code>                    if(separator == undefined)<br />
separator = ',';</code></code></code></div>
<div><code><code><code>                    tableHeaders += separator +' '+ $(this).index()+' : { sorter: "'+key+'"}';<br />
});<br />
});</code></code></code></div>
<div><code><code><code>            $(this).tablesorter({ widgets: ['zebra'], dateFormat: 'uk', noSorterClass: 'no-sorter', headers: tableHeaders });<br />
});<br />
}</code></code></code></div>
<div></div>
<div><code><code><code>    if($('.tablesorter')[0])<br />
setupTablesorter();<br />
</code></code></code></div>
<div></div>
<div><code><code><code>});</code></code></code></div>
<div></div>
<div></div>
<div></div>
<div>E agora é cria a tabela e inserir a classe "tablesorter" e as classes referentes a cada configuração em suas respectivas tags "th" e pronto! Está feito!Os arquivos estão disponíveis no meu Github para quem quiser porpôr melhores soluções. e farei um gist com eles.</div>
<div></div>
<div></div>
<div>Link github: <a href="https://github.com/willmendesneto/tablesorter" target="_blank">https://github.com/willmendesneto/tablesorter</a></div>
<div></div>
<div>Obrigado a todos e até mais!</div>
<div></div>
<div></div>
